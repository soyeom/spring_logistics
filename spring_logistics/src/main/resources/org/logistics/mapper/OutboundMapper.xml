<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<!-- OutboundMapper.xml -->
<mapper namespace="org.logistics.mapper.OutboundMapper">

    <select id="selectByItemId" parameterType="map" resultType="org.logistics.domain.OutboundVO">
        SELECT d.out_id        AS outboundDetailId,
               d.item_id       AS itemId,
               m.out_type      AS outboundType,
               m.out_date      AS outboundDate,
               d.qty           AS outboundQty,
               d.special_note  AS note
        FROM out_detail d
        JOIN out_master m ON d.out_id = m.out_id
        WHERE d.item_id = #{itemId}
        <if test="warehouseId != null">
            AND d.warehouse_id = #{warehouseId}
        </if>
        ORDER BY m.out_date DESC
    </select>

</mapper>

  